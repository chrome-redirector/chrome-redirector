<!-- Options page.

     Copyright (C) 2010-2012.

     This file is part of Redirector.

     Redirector is free software: you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation, either version 3 of the License, or
     (at your option) any later version.

     Redirector is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with Redirector.  If not, see <http://www.gnu.org/licenses/>.

     From Cyril Feng. -->

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;
                                             charset=utf-8">
    <title i18nT="PAGE_TITLE"></title>
    <script src="/js/common.js" type="text/javascript"></script>
    <script src="/js/prompt.js" type="text/javascript"></script>
    <script src="/js/i18n.js" type="text/javascript"></script>
    <script src="/js/pref.js" type="text/javascript"></script>
    <script src="/js/rule.js" type="text/javascript"></script>
    <script src="/js/options.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/css/options.css" type="text/css">
  </head>

  <body onload="$f.initOpt()">
    <!-- Navigation bar -->
    <div id="navBar">
      <h1>Redirector</h1>

      <ul id="navTags">
        <li id="prefTag">
          <a href="#pref" i18nT="NAVBAR_PREF"
             onclick="$f.switchNav('prefTag')"></a>
        </li>
        <li id="ruleMgrTag">
          <a href="#ruleMgr" i18nT="NAVBAR_RULEMGR"
             onclick="$f.switchNav('ruleMgrTag')"></a>
        </li>
        <li id="docTag">
          <a href="#doc" i18nT="NAVBAR_DOC"
             onclick="$f.switchNav('docTag')"></a>
        </li>
      </ul>
    </div>

    <!-- The main display part -->
    <div id="main-container">
      <div id="main">
        <!-- Page for Preferences -->
        <div id="pref">
          <h1 i18nT="PREF_TITLE"></h1>

          <!-- Language settings -->
          <h3>Language</h3>
          <section>
            <select id="langSel">
              <option>Change language...</option>
            </select>
          </section>

          <!-- Proto settings -->
          <h3 i18nT="PROTO_TITLE"></h3>
          <section>
            <input type="checkbox" id="pref_proto_all"
                   onclick="$v.pref.onChgProto('all')" />
            <label i18nT="PROTO_ALL"></label><br />
            <input type="checkbox" id="pref_proto_http"
                   onclick="$v.pref.onChgProto('http')" />
            <label>HTTP://</label><br />
            <input type="checkbox" id="pref_proto_https"
                   onclick="$v.pref.onChgProto('https')" />
            <label>HTTPS://</label><br />
            <input type="checkbox" id="pref_proto_ftp"
                   onclick="$v.pref.onChgProto('ftp')" />
            <label>FTP://</label><br />
            <input type="checkbox" id="pref_proto_file"
                   onclick="$v.pref.onChgProto('file')" />
            <label>FILE://</label><br />
          </section>

          <!-- Context menu settings -->
          <h3 i18nT="CONTEXT_TITLE"></h3>
          <section>
            <input type="checkbox" id="pref_context_link"
                   onclick="$v.pref.onChgContext()" />
            <label i18nT="CONTEXT_LINK"></label><br />
            <input type="checkbox" id="pref_context_page"
                   onclick="$v.pref.onChgContext()" />
            <label i18nT="CONTEXT_PAGE"></label><br />
          </section>

          <!-- Input prompt settings -->
          <h3 i18nT="PROMPT"></h3>
          <section>
            <input type="checkbox" id="pref_prompt"
                   onclick="$v.pref.onChgPrompt()" />
            <label i18nT="PROMPT_CHKBOX"></label>
          </section>

          <!-- <\!-- Misc settings -\-> -->
          <!-- <h3 i18nT="MISC_TITLE"></h3> -->
          <!-- <section> -->
          <!-- </section> -->
        </div>

        <!-- Page for rules -->
        <div id="ruleMgr" class="mainview">
          <h1 i18nT="RULEMGR_TITLE"></h1>

          <!-- Rules list -->
          <h3 i18nT="LBL_TITLE"></h3>
          <section>
            <div class="div-center">
              <input type="button" i18nP="value:BTN_NEW"
                     onclick="$v.ruleList.add()" />
              <input type="button" i18nP="value:BTN_EDIT"
                     onclick="$v.ruleList.edit()" />
              <input type="button" i18nP="value:BTN_DEL"
                     onclick="$v.ruleList.del()" />
              <input type="button" i18nP="value:BTN_UP"
                     onclick="$v.ruleList.move(-1)" />
              <input type="button" i18nP="value:BTN_DOWN"
                     onclick="$v.ruleList.move(1)" />
            </div>

            <table id="ruleListTable">
              <colgroup>
                <col width="4%">
                <col width="24%" span="4">
              </colgroup>
              <tr>
                <th i18nT="LBL_NAME" colspan="2"></th>
                <th i18nT="LBL_MATCH"></th>
                <th i18nT="LBL_SUB"></th>
                <th i18nT="LBL_REPL"></th>
              </tr>
            </table>
          </section>

          <!-- Backup rule list -->
          <h3 i18nT="RULEMGR_BAK_TITLE" style="cursor: pointer;"
              onclick="$('div_bak').className =
                       $('div_bak').offsetHeight === 0 ? 'show' : ''">
          </h3>
          <section>
            <div id="div_bak">
              <p>
                <input type="button" i18nP="value:BTN_BAK"
                       onclick="$v.ruleList.bak()" />
              </p>
              <p>
                <input type="button" i18nP="value:BTN_RESTORE"
                       onclick="$v.ruleList.restore()" />
                <input type="file" id="ruleEdit_restoreFile" />
              </p>
              <p>
                <input type="button" i18nP="value:BTN_APPEND"
                       onclick="$v.ruleList.restore(true)" />
                <input type="file" id="ruleEdit_appendFile" />
              </p>
            </div>
          </section>
        </div>

        <!-- Page for docs -->
        <div id="doc" class="mainview">
          <h1 i18nT="DOC_TITLE"></h1>

          <section>
            <h3>
              <a href="/html/en.html" target="_blank">English</a>
            </h3>
            <h3>
              <a href="/html/zh_CN.html" target="_blank">中文(简体)</a>
            </h3>
          </section>
        </div>

        <div id="overlay">
          <!-- Rule Editor -->
          <div id="layerFront">
            <section>
              <h1 i18nT="RULE_EDITOR"></h1>
            </section>
            <!-- Main form -->
            <form id="ruleEdit" onsubmit="return false;"
                  autocomplete="off">
              <section id="ruleEdit_name">
                <!-- Rule name -->
                <h3 i18nT="LBL_NAME"></h3>
                <br />
                <input id="ruleEdit_namestr" placeholder="NAME"
                       required />
              </section>

              <section id="ruleEdit_match">
                <!-- Match pattern -->
                <h3 i18nT="LBL_MATCH"></h3>
                <select id="ruleEdit_matchtype"
                        onchange="$v.ruleList.onChgMatchType()">
                  <option selected="selected" i18nT="TYPE_REGEXP">
                  </option>
                  <option i18nT="TYPE_GLOB"></option>
                  <option i18nT="TYPE_MANUAL"></option>
                </select>
                <input type="checkbox" id="ruleEdit_matchcase" />
                <label i18nT="LBL_IGNCASE"></label>
                <br />
                <input id="ruleEdit_matchstr"
                       placeholder="MATCH PATTERN" required />
              </section>

              <section id="ruleEdit_sub">
                <!-- Substitution -->
                <h3 i18nT="LBL_SUB"></h3>
                <select id="ruleEdit_subtype"
                        onchange="$v.ruleList.onChgSubType()">
                  <option selected="selected" i18nT="TYPE_REGEXP">
                  </option>
                  <option i18nT="TYPE_GLOB"></option>
                  <option i18nT="TYPE_BLOCK"></option>
                  <option i18nT="TYPE_HDR"></option>
                </select>
                <input type="checkbox" id="ruleEdit_subcase" />
                <label i18nT="LBL_IGNCASE"></label>
                <input type="checkbox" id="ruleEdit_subglob" />
                <label i18nT="LBL_SUBGLOB"></label>
                <br />
                <input id="ruleEdit_substr"
                       placeholder="SUB STRING/REGEXP" required />
              </section>

              <section id="ruleEdit_repl">
                <!-- Replacement -->
                <h3 i18nT="LBL_REPL"></h3>
                <input type="checkbox" id="ruleEdit_replDecode" />
                <label i18nT="LBL_REPLDECODE"></label>
                <br />
                <input id="ruleEdit_replstr" placeholder="REPLACEMENT" />
              </section>

              <!-- Save/Cancel buttons -->
              <section>
                <div class="action-area">
                  <input type="submit" i18nP="value:BTN_SAVE"
                         onclick="$v.ruleList.save()" />
                  <input type="button" i18nP="value:BTN_CANCEL"
                         onclick="$v.ruleList.discard()" />
                </div>
              </section>
            </form>

            <hr />

            <!-- Test form -->
            <form onsubmit="return false;" autocomplete="off">
              <section>
                <h3 i18nT="LBL_TEST" style="cursor: pointer;"
                    onclick="$('div_test').className =
                             $('div_test').offsetHeight === 0 ? 'show' : ''">
                </h3>
              </section>
              <div id="div_test">
                <section id="ruleEdit_test">
                  <br />
                  <input type="url" id="ruleEdit_teststr"
                         class="input-text"
                         placeholder="TEST URL" required />
                  <div class="action-area">
                    <input type="submit" i18nP="value:BTN_TEST"
                           onclick="$v.ruleList.test()" />
                  </div>
                </section>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

<!-- Notification layer -->
<div id="layerNotif" onclick="this.className=''">
  <div  class="div-center">
    <div id="layerNotif_disp"></div>
  </div>
</body>
</html>
